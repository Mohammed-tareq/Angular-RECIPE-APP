<div class="h-screen flex flex-col bg-gradient-to-br from-orange-50 to-orange-100">

  <div class="p-4 bg-orange-500 text-white text-lg font-semibold shadow text-center flex justify-between items-center">
  <span>Talk to AI Assistant</span>
  <button 
    (click)="resetChat()" 
    class="text-xs bg-orange-400 hover:bg-orange-600 px-2 py-1 rounded shadow">
    Reset Chat
  </button>
</div>

  <div class="flex-1 overflow-y-auto p-4 space-y-4">
  <div *ngFor="let msg of messages">
    <!-- AI message -->
    <div *ngIf="msg.from === 'ai'" class="flex items-start space-x-2 max-w-lg">
      <div class="w-8 h-8 rounded-full bg-orange-300 flex items-center justify-center text-white font-semibold">AI</div>
      <div class="bg-white text-sm p-3 rounded-r-2xl rounded-bl-2xl shadow text-gray-800">
        {{ msg.text }}
      </div>
    </div>

    <!-- User message -->
    <div *ngIf="msg.from === 'user'" class="flex items-end justify-end space-x-2 max-w-lg ml-auto">
      <div class="bg-orange-500 text-sm p-3 text-white rounded-l-2xl rounded-br-2xl shadow">
        {{ msg.text }}
      </div>
      <div class="w-8 h-8 rounded-full bg-orange-400 flex items-center justify-center text-white font-semibold">U</div>
    </div>
  </div>

  <div *ngIf="loading" class="flex items-start space-x-2 max-w-lg animate-pulse">
      <div class="w-8 h-8 rounded-full bg-orange-300 flex items-center justify-center text-white font-semibold">AI</div>
      <div class="bg-white text-sm p-3 rounded-r-2xl rounded-bl-2xl shadow text-gray-800 w-full max-w-[300px]">
        <div class="h-4 bg-orange-100 rounded w-3/4 mb-2"></div>
        <div class="h-4 bg-orange-100 rounded w-1/2"></div>
      </div>
    </div>

</div>

  <div class="p-4 bg-white shadow border-t border-orange-200">
    <form class="flex items-center gap-2">
      <input 
      type="text" 
      placeholder="Type your message..." 
      class="flex-1 border border-orange-300 rounded-full py-2 px-4 text-sm focus:outline-none focus:ring-2 focus:ring-orange-400" 
      [(ngModel)]="prompt"
      [ngModelOptions]="{standalone: true}"/>
      <button 
  type="submit" 
  class="bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-full text-sm shadow transition disabled:opacity-50"
  (click)="sendData()" 
  [disabled]="loading">
  Send
</button>
      <!-- <button (click)="exportChatAsText()" class="text-xs text-orange-600 hover:underline mt-2 ml-4">
  Export Chat
</button> -->
    </form>
  </div>
</div>
